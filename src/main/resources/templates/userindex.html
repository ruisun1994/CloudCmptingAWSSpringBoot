<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/userindex.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>User Index</title>
    <script>
        var imageExtentions = ["jpg", "png", "jpeg"];
        function checkFileType() {
            var flag = imageExtentions.indexOf(document.getElementById("profilepicture").value.split(".").pop());
            if (flag == -1) {
                alert("Invalid picture format!");
                return false;
            }
            return true;
        }

    </script>
</head>
<body class="text-center">
<div class="panel">
    <img class="mb-4" src="https://d28htnjz2elwuj.cloudfront.net/wp-content/uploads/2013/11/Northeastern_University_Logo.jpg" alt="" width="72" height="72">
    <h1 class="h4 mb-3 font-weight-normal">Hello  <span th:text="${user}"></h1>
    <h6 class="h6 mb-3 font-weight-normal" th:text="${currentTime}"></h6>
    <img class="h6 mb-3 font-weight-normal"><img width="200" height="200" alt="No Picture" th:src="@{'data:img/png;base64,'+${userProfile}}"></h6>
    <form class="panel" action="/user/uploadpicture" method="POST" enctype="multipart/form-data">
        <input class="form-control" type="file" id="profilepicture" name="profilepicture" >
        <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="return checkFileType()">Upload</button>
    </form>
    <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="window.location.href='/user/deletepicture'">Delete</button>
    <form class="panel" action="/user/uploadaboutme" method="POST">
        <input class="form-control" type="text" id="aboutme" name="aboutme" maxlength="140" th:value="${aboutMe}"  >
        <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="window.location.href='/user/uploadaboutme'">Upload</button>
    </form>
    <button class="btn btn-lg btn-primary btn-block" type="submit" onclick="window.location.href='/user/logout'">logout</button>
    <p class="mt-5 mb-3 text-muted">&copy;CSYE6225</p>
</div>
</body>
</html>